!function(r){r(document).ready(function(){r(".af-field-dropdown.floating").parents(".acf-input").find("input").addClass("has-field-inserter"),r(document).on("click",".af-dropdown .field-option",function(e){e.stopPropagation();var t,a,n,o=r(this),i=o.data("insert-value"),c=o.parents(".acf-field").first().find(".wp-editor-area");0<c.length?tinymce.editors[c.attr("id")].editorCommands.execCommand("mceInsertContent",!1,i):(a=o.parents(".acf-input").first().find("input[type=text]"),t=a.get(0),e=i,(c=t)&&(o=c.scrollTop,a=0,"ie"==(i=c.selectionStart||"0"==c.selectionStart?"ff":!!document.selection&&"ie")?(c.focus(),(n=document.selection.createRange()).moveStart("character",-c.value.length),a=n.text.length):"ff"==i&&(a=c.selectionStart),t=c.value.substring(0,a),n=c.value.substring(a,c.value.length),c.value=t+e+n,a+=e.length,"ie"==i?(c.focus(),(e=document.selection.createRange()).moveStart("character",-c.value.length),e.moveStart("character",a),e.moveEnd("character",0),e.select()):"ff"==i&&(c.selectionStart=a,c.selectionEnd=a,c.focus()),c.scrollTop=o)),r(".af-field-dropdown").removeClass("open")}),r(document).on("click",function(){r(".af-field-dropdown").removeClass("open")}),r(document).on("click",".af-field-dropdown",function(e){e.stopPropagation();e=r(this);e.hasClass("open")?e.removeClass("open"):(r(".af-field-dropdown").removeClass("open"),e.addClass("open"))}),r('.acf-field[data-type="field_picker"]').each(function(){function e(){var e=t.find(".format-input");"custom"==t.find("select").val()?e.show():e.hide()}var t=r(this);t.find("select").on("change",e),e()}),r(".zapier-test-button").click(function(){var e=r(this),t=e.parent().find("input"),a=e.data("form-key");e.attr("disabled","disabled");var n=e.outerWidth();e.css("width",n+"px");n=r('<span class="spinner is-active">');e.empty().append(n);t={action:"test_zapier_submission",form_key:a,webhook_url:t.val()};r.post(ajaxurl,t,function(){e.html("Sent!"),setTimeout(function(){e.removeAttr("disabled"),e.css("width",""),e.html(e.data("text"))},3e3)})});var e=r(".post-type-af_form #posts-filter");e.wrap('<div class="af-forms-wrapper" />'),e.addClass("af-forms-list"),e.after(r("#af-sidebar-template").html());var o=r(".af-form-export");o.find(".copy-button").click(function(){var e=r(this),t=o.find(".export-code").text(),a=r("<textarea>");r("body").append(a),a.val(t).select(),document.execCommand("copy"),a.remove();var n=e.text();e.text(e.data("copied-text")),e.attr("disabled",!0),setTimeout(function(){e.text(n),e.attr("disabled",null)},1e3)})}),r(document).ready(function(){function a(e,a){e&&r.ajax({url:acf.get("ajaxurl"),data:{action:"af_gutenberg_get_form_data",form_key:e},type:"post",success:function(e){var t=a.find(".edit-form-link");e.data.edit_url?(t.show(),t.attr("href",e.data.edit_url)):t.hide(),acf.doAction("af/admin/gutenberg/form_selected",e.data,a)}})}acf.addAction("new_field/name=af_block_form",function(e){var t=e.$el.closest(".acf-block-component");a(e.val(),t),e.$input().change(function(){a(e.val(),t)})}),acf.addFilter("select2_ajax_data",function(e,t,a,n,o){if("field_af_block_exclude_fields"!=n.data.key)return e;n=n.$el.closest(".acf-block-component"),n=acf.getField(n.find(".acf-field-af-block-form"));return e.form=n.val(),e})})}(jQuery);